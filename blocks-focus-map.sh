#!/bin/sh

rm -f 0004-initial-focus-*.json
rm -f 0004-focus-*.json

if test "$1" = "clean"
then
  rm -f 0010-focus-map-*.json
  exit
fi

while read blockid tyc alpha delta
do

  cat <<EOF >0010-focus-map-$blockid.json
{
  "project": {
    "identifier": "0010",
    "name": "focus map"
  },
  "identifier": "$blockid",
  "name": "focus map near $(printf "%.0fd" $alpha) $(printf "%+.0fd" $delta)",
  "visits": [
    {
      "identifier": "1001",
      "name": "focus",
      "targetcoordinates": {
        "type"   : "equatorial",
        "alpha"  : "$(printf "%.5fd" $alpha)",
        "delta"  : "$(printf "%+.4fd" $delta)",
        "equinox": "2000"
      },
      "command": "focusvisit",
      "estimatedduration": "3m"
    }
  ],
  "constraints": {
    "maxskybrightness": "nauticaltwilight",
    "minmoondistance": "15d"
  },
  "priority": "10",
  "persistent": "false"
}
EOF

# These are VT â‰ˆ 12.0 Tycho stars spaced every hour at +25d and +45d.
done <<EOF
000	1729-1345-1	0.35465139	24.48369611
001	1743-1900-1	15.28286056	25.02507472
002	1760-1711-1	30.19044694	25.27217667
003	1786-1183-1	44.84281639	25.28947222
004	1817-1054-1	59.99623278	25.11569
005	1849-2019-1	75.35827611	24.72920917
006	1868-0263-1	90.00050389	24.86593583
007	1899-1774-1	104.8263358	25.07355194
008	1930-0496-1	120.2307225	24.82196639
009	1950-0832-1	135.2028014	24.89398667
010	1964-1168-1	149.9793867	25.26421
011	1978-0914-1	165.4270775	25.47435417
012	1986-2193-1	180.0749042	24.68490306
013	1993-1837-1	195.0808231	25.15213333
014	2009-0925-1	210.0164025	25.09544361
015	2017-0341-1	225.4104794	24.76968778
016	2038-1213-1	240.1295278	25.07925167
017	2063-1046-1	255.1360244	24.87890583
018	2095-1342-1	270.0393625	24.52651722
019	2126-2069-1	285.0030858	25.00682417
020	2145-1208-1	300.0084125	24.99171417
021	2176-1129-1	315.1874878	25.08391222
022	2207-1050-1	330.1663142	25.10426528
023	2238-1491-1	345.2605597	24.94194833
100	2795-2363-1	5.91537111	44.91542444
101	3265-0052-1	20.79494694	45.030295
102	3294-0880-1	35.85209389	45.06904861
103	3311-0087-1	50.55290111	45.41335667
104	3329-0004-1	65.21220806	45.19296111
105	3358-2261-1	80.58744389	45.22976444
106	3376-0034-1	95.67734889	45.01581889
107	3393-0780-1	110.5479925	45.29458667
108	2980-0120-1	125.6958633	44.99377528
109	3425-1381-1	140.3516597	45.06137944
110	3435-0388-1	155.9958511	45.11659917
111	3451-0373-1	170.7115333	45.09610861
112	3455-2100-1	185.3719736	45.18766611
113	3460-1509-1	200.4766831	45.02182639
114	3472-0265-1	215.620295	45.40024167
115	3482-1675-1	230.8688081	45.15166972
116	3492-1179-1	246.0269756	45.16287306
117	3508-0797-1	260.6924167	45.29125306
118	3525-0035-1	275.3210606	45.16915472
119	3543-0999-1	290.5189428	45.10856222
120	3572-0286-1	305.6864231	45.13036167
121	3590-0089-1	320.6695158	45.21215694
122	3607-1397-1	335.463085	45.05888583
123	3636-0394-1	351.003725	45.01971972
EOF
